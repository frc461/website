<%- model_class = Forum -%>
<div class="page-header">
  <h1><%= @forum.name %></h1>
</div>

<p>
  <%= @forum.description %>
</p>

<% if @forum.comments.where(:parent_id => nil).count < 1 %>
<p>No threads yet.</p>
<% else %>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Thread</th>
      <th>User</th>
      <th>Sticky</th>
    </tr>
  </thead>
  <tbody>
    <% @forum.comments.where(:parent_id => nil, :sticky => true).each do |comment| %>
      <tr>
        <% if comment.important %>
        <td><%= link_to comment.title, comment, :class => "text-error" %></td>
        <% else %>
        <td><%= link_to comment.title, comment %></td>
        <% end %>
        <td><%= comment.user.name %></td>
        <td>Sticky!!!</td>
      </tr>
    <% end %>
    <% @forum.comments.where(:parent_id => nil, :sticky => false).each do |comment| %>
      <tr>
        <% if comment.important %>
        <td><%= link_to comment.title, comment_path(comment), :class => "text-error" %></td>
        <% else %>
        <td><%= link_to comment.title, comment_path(comment) %></td>
        <% end %>
        <td><%= comment.user.name %></td>
        <td></td>
      </tr>
    <% end %>
  </tbody>
</table>
<% end %>

<%= link_to "New Thread", new_comment_path(:forum_id => @forum.id) %>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              forums_path, :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_forum_path(@forum), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              forum_path(@forum),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
</div>
