<%- model_class = Comment -%>
<div class="page-header">
	<h1><%=t '.title', default: model_class.model_name.human.pluralize %></h1>
</div>
<table class="table table-striped">
	<thead>
		<tr>
			<% if current_user.admin? %><th>User</th><% end %>
			<th><%= model_class.human_attribute_name(:content) %></th>
			<th>Thread</th>
			<th>Forum</th>
			<th><%=t '.actions', default: t("helpers.actions") %></th>
		</tr>
	</thead>
	<tbody>
		<% @comments.each do |comment| %>
		<tr>
			<% if current_user.admin? %><td><%= comment.user.name %></td><% end %>
			<td><%= comment.content %></td>
			<td><%=
				if comment.parent
					link_to comment.parent.title, comment.parent
				else
					link_to comment.title, comment
				end
				   %></td>
			<td><%= link_to (comment.forum || comment.parent.forum).name, (comment.forum || comment.parent.forum) %>
			<td>
				<%= link_to t('.edit', default: t("helpers.links.edit")),
                edit_comment_path(comment), class: 'btn btn-mini' %>
				<%= link_to t('.destroy', default: t("helpers.links.destroy")),
                comment_path(comment),
                method: :delete,
                data: { confirm: t('.confirm', default: t("helpers.links.confirm", default: 'Are you sure?')) },
                class: 'btn btn-mini btn-danger' %>
			</td>
		</tr>
		<% end %>
	</tbody>
</table>

<%= link_to t('.new', default: t("helpers.links.new")),
new_comment_path,
class: 'btn btn-primary' %>
